<!DOCTYPE html>
<html ng-app="fcfApp">
  <head>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.15/angular.js"></script>
    <script src="../js/app.js"></script>


    <link type="text/css" rel="stylesheet" href="../css/materialize.css"  media="screen,projection"/>
    <link type="text/css" rel="stylesheet" href="../css/stylesheet.css"  media="screen,projection"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  </head>
  <body ng-controller="ApplicationController">
    <div class="section">
      <div class="container">
        <div class="row valign-wrapper">
          <img class="profile-image circle"  src="{{ page.image_path }}">
          <div class="teal-text text-darken-2 col s9">
            <h1 class="name valign">
              {{ page.username }}
            </h1>
            <p class="subtitle flow-text center">
              {{ page.subtitle }}
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="section white-text teal darken-2">
      <div class="container">
        <div class="row">
          {% for panel in page.panels %}
          <div class="col s12 m6">
            <p class="panel-text">
              {{ panel.primary }}
            </p>
            <blockquote>
              {{ panel.snippet }}
            </blockquote>
            <div class="left-align">
              <a class="btn btn-large modal-trigger teal lighten-1" href="#modal-{{ forloop.index }}">
                {{ panel.button }}
              </a>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
    <div class="section">
      <div class="container">
        <div class="row">
          <div class="center-align">
            <h2 class="teal-text text-darken-1">
              {{ page.gift_amount_title }}
            </h2>
          </div>
        <div class="row">
          {% for investment in page.investments %}
          <div class="col s12 m6">
            {{ investment.copy }}
          </div>
          {% endfor %}
        </div>
        <div class="row">
          <div class="contribution-input teal-text text-darken-1">
            <span class="dollar-sign">$</span>
            <span contenteditable="true" id="contribution" ng-model="expectedContribution">100</span>
          </div>
          <bar-chart class="investment-chart">
          </bar-chart>
        </div>
      </div>
    </div>
  </div>
  <div class="section white-text teal darken-2">
    <div class="container">
        <form class="pledge-form col s12" style="text-align:center">
          <h1 style="font-weight:300;letter-spacing:-3px">
            {{ page.form.title }}
          </h1>
          <h3 style="font-weight:300;letter-spacing:-1px">
            {{ page.form.subtitle }}
          </h3>
          <p class="left" style="font-size:1.25rem;margin-bottom:25px;">
            {{ page.form.description }}
          </p>
          <div class="row">
            {% for pledge_info in page.pledge_infos %}
            <div class="col s12 m6 left-align">
              {{ pledge_info.copy }}
            </div>
            {% endfor %}
          </div>
          <div class="row">
            <div class="input-field white-text col s6">
               <i class="mdi-action-account-circle prefix"></i>
              <input id="first_name" type="text" class="validate">
              <label for="first_name">
                {{ page.form.first_name }}
            </label>
            </div>
            <div class="input-field white-text col s6">
              <input id="last_name" type="text" class="validate">
              <label for="last_name">
                {{ page.form.last_name }}
            </label>
            </div>
          </div>
          <div class="row">
            <div class="input-field white-text col s12">
              <i class="mdi-communication-email prefix"></i>
              <input id="email" type="email" class="validate">
              <label for="email">
                {{ page.form.email }}
            </label>
            </div>
          </div>
          <div class="row">
            <div class="input-field white-text col s6">
              <i class="mdi-editor-attach-money prefix"></i>
              <input id="amount" type="text" class="validate">
              <label for="amount">
                {{ page.form.amount }}
            </label>
            </div>
          </div>
          <div class="row">
            <div class="input-field col s12">
              <i class="mdi-editor-mode-edit prefix"></i>
              <textarea id="message" class="materialize-textarea"></textarea>
              <label for="message">
                {{ page.form.message }}
            </label>
            </div>
          </div>
          <a class="submit btn white black-text waves-effect waves-light" target="_blank" href="{{ data.form.pledge_link }}">
            {{ page.form.pledge }}
            <i class="mdi-content-send right"></i>
          </a>
        </form>
      </div>
    </div>
  </div>
  <footer class="page-footer white">
    <div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h3>
            {{ page.footer.title }}
          </h3>
          <p>
            {{ page.footer.subtitle }}
          </p>
        </div>
        <div class="col l4 offset-l2 s12">
          <h5>
            {{ page.footer.company }}
          </h5>
          <ul>
            {% for link in page.footer.links %}
            <li>
              <a href="{{ link.href }}">
                {{ link.title }}
              </a>
            </li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright teal darken-2">
      <div class="container">
        {{ page.footer.copyright }}
      </div>
    </div>
  </footer>
    </div>

    {% include modals.html %}

    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="../js/bin/materialize.js"></script>

    <script>
    $(document).ready(function(){
      $('.modal-trigger').leanModal();
    });
    </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-63532009-1', 'auto');
    ga('send', 'pageview');

  </script>

  <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
  <script>
    var dataRef = new Firebase('https://amber-fire-1402.firebaseio.com/');

    $('.submit').on('click', function (e) {
      var pledge = {
        firstName: $('#first_name').val(),
        lastName: $('#last_name').val(),
        email: $('#email').val(),
        amount: $('#amount').val(),
        message: $('#message').val()
      };
      dataRef.push(pledge);
    })

  </script>
  </body>
</html>